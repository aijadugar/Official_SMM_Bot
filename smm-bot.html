<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Classic ChatBot</title>
  <style>
    body {
      font-family: "Segoe UI", sans-serif;
      margin: 0;
      padding: 0;
    }

    .chat-bubble {
      padding: 10px 14px;
      margin: 8px 0;
      border-radius: 12px;
      max-width: 80%;
      font-size: 14px;
      animation: fadeInUp 0.3s ease forwards;
    }

    .chat-bubble.bot {
      background-color: #f0f0f0;
      color: #000;
      align-self: flex-start;
    }

    .chat-bubble.user {
      background-color: #d32f2f;
      color: #fff;
      align-self: flex-end;
      text-align: right;
    }

    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    #chat-widget {
      position: fixed;
      bottom: 100px;
      right: 30px;
      width: 450px;
      height: 500px;
      display: flex;
      flex-direction: column;
      background: #fff;
      border: 1px solid #ccc;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      opacity: 0;
      pointer-events: none;
      transform: translateY(20px);
      transition: all 0.4s ease;
      z-index: 9999;
    }

    #chat-widget.open {
      opacity: 1;
      pointer-events: auto;
      transform: translateY(0);
    }

    #chatbox {
      display: flex;
      flex-direction: column;
      height: 100%;
      padding: 10px;
      box-sizing: border-box;
    }

    #chatlog {
      flex: 1;
      overflow-y: auto;
      margin-bottom: 10px;
      padding-right: 6px;
      display: flex;
      flex-direction: column;
      -ms-overflow-style: none;
      scrollbar-width: none;
    }

    #chatlog::-webkit-scrollbar {
      display: none;
    }

    .message-container {
      display: flex;
      justify-content: flex-start;
      width: 100%;
      margin: 8px 0;
    }

    .message-container.user {
      justify-content: flex-end;
    }

    .chat-bubble {
      padding: 10px 14px;
      border-radius: 12px;
      max-width: 80%;
      font-size: 14px;
      animation: fadeInUp 0.3s ease forwards;
    }

    .chat-bubble.bot {
      background-color: #f0f0f0;
      color: #000;
    }

    .chat-bubble.user {
      background-color: #d32f2f;
      color: #fff;
      text-align: right;
    }

    #chat-options {
      display: flex;
      flex-direction: column;
      align-items: flex-end;
      gap: 6px;
      margin-bottom: 10px;
    }

    .chat-options-button {
      background-color: #d32f2f;
      color: white;
      border: none;
      border-radius: 20px;
      padding: 8px 16px;
      font-size: 14px;
      cursor: pointer;
    }
    .chat-options-button:hover {
      background-color: #b92424;
    }

#chat-input-container {
  display: none; /* Already hidden by default */
  border-top: 1px solid #ccc;
  padding: 10px 0 0;
}


    #chat-input {
      display: flex;
      gap: 8px;
      align-items: center;
    }

    #userinput {
      flex: 1;
      padding: 8px;
      border-radius: 6px;
      font-size: 14px;
      border: 1px solid #ccc;
      outline: none;
    }

    #sendBtn {
      background: transparent;
      border: none;
      cursor: pointer;
    }

    #sendBtn img {
      width: 24px;
      height: 24px;
    }

    #chat-toggle {
      position: fixed;
      bottom: 30px;
      right: 30px;
      width: 60px;
      height: 60px;
      background: white;
      border-radius: 50%;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      z-index: 9999;
    }

    #chat-toggle img {
      width: 56px;
      height: 56px;
      border-radius: 12px;
      object-fit: cover;
    }

    #chat-down-arrow {
      position: fixed;
      bottom: 30px;
      right: 30px;
      width: 60px;
      height: 60px;
      background-color: #ff3c3c;
      color: white;
      font-size: 30px;
      font-weight: bold;
      border-radius: 50%;
      display: none;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      z-index: 10000;
    }

    #chat-greeting {
      position: fixed;
      bottom: 90px;
      right: 30px;
      background-color: #d32f2f;
      color: white;
      padding: 10px 16px;
      border-radius: 20px;
      font-size: 14px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.15);
      opacity: 0;
      transform: translateY(10px);
      transition: opacity 0.5s ease, transform 0.5s ease;
      pointer-events: none;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    #chat-greeting.show {
      opacity: 1;
      pointer-events: auto;
      transform: translateY(0);
    }
    #chat-greeting img {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  border: 2px solid #ccc;
  object-fit: cover;
}
    #close-greeting {
      background: none;
      border: none;
      color: white;
      font-size: 16px;
      cursor: pointer;
    }

    .bot-message-wrapper {
      display: flex;
      align-items: flex-end;
      margin-bottom: 8px;
    }
    .bot-avatar {
      width: 28px;
      height: 28px;
      border-radius: 50%;
      margin-right: 8px;
      display: none;
    }
    .bot-message-wrapper.last .bot-avatar {
      display: block;
    }
  </style>
</head>
<body>

<div id="chat-widget">
  <div id="chatbox">
    <div id="chatlog"></div>
    <div id="chat-options"></div>
    <div id="chat-input-container">
      <div id="chat-input">
        <input type="text" id="userinput" placeholder="Type your message here..." />
        <button onclick="sendMessage()" id="sendBtn">
          <img src="https://www.idti.in/wp-content/uploads/2025/06/send-message.png" alt="Send" />
        </button>
      </div>
    </div>
  </div>
</div>

<div id="chat-down-arrow" onclick="toggleChat()">
  <span>&#x25BC;</span>
</div>

<div id="chat-greeting">
  <img src="smm.png" alt="Chat Icon" />
  <span>Hi, how can I help you today?</span>
  <button id="close-greeting" onclick="closeGreeting()">Ã—</button>
</div>

<div id="chat-toggle" onclick="toggleChat()">
  <img src="smm.png" alt="Chat Icon" />
</div>

<script>
let chatStage = 0;

function scrollChatToBottom() {
  const log = document.getElementById("chatlog");
  log.scrollTop = log.scrollHeight;
}

function addBotMessage(text) {
  const log = document.getElementById("chatlog");
  const prevLast = log.querySelector(".bot-message-wrapper.last");
  if (prevLast) prevLast.classList.remove("last");

  const wrapper = document.createElement("div");
  wrapper.className = "bot-message-wrapper last message-container";

  const avatar = document.createElement("img");
  avatar.className = "bot-avatar";
  avatar.src = "smm.png";

  const msgDiv = document.createElement("div");
  msgDiv.className = "chat-bubble bot";
  msgDiv.textContent = text;

  wrapper.appendChild(avatar);
  wrapper.appendChild(msgDiv);
  log.appendChild(wrapper);
  scrollChatToBottom();
}

function addUserMessage(text) {
  const container = document.createElement("div");
  container.className = "message-container user";
  
  const div = document.createElement("div");
  div.className = "chat-bubble user";
  div.textContent = text;
  
  container.appendChild(div);
  document.getElementById("chatlog").appendChild(container);
  scrollChatToBottom();
}

function clearOptions() {
  document.getElementById("chat-options").innerHTML = "";
}

function showOptions(options) {
  const container = document.getElementById("chat-options");
  clearOptions();
  options.forEach(option => {
    const btn = document.createElement("button");
    btn.className = "chat-options-button";
    btn.textContent = option;
    btn.onclick = () => handleOptionClick(option);
    container.appendChild(btn);
  });
}

function showBotMessagesThenOptions(messages, options, delay = 1000) {
  let index = 0;
  function showNext() {
    if (index < messages.length) {
      addBotMessage(messages[index]);
      index++;
      setTimeout(showNext, delay);
    } else {
      showOptions(options);
    }
  }
  showNext();
}

function showInitialBotMessages() {
  if (chatStage !== 0) return;
  const messages = [
    "Hi, I'm The SMM Hub : an ROI-focused digital marketing and creative agency based in Mumbai. Let's get started!",
    "Kindly let us know which services you are looking for"
  ];
  const options = ["Social Media Marketing", "Performace Marketing for Ecommerce Brands", "Google / Meta Ads", "Website Design and Development", "Audit - Analyzing your current Marketing Efforts", "Bussiness Consulting & Strategy Meeting", "SEO - Search Engine Optimization", "Branding - Name, Logo, Website Design, Packaging", "Ad Hoc Collaterals", "E-commerce Product Photoshoot", "Other"];
  showBotMessagesThenOptions(messages, options, 800);
  chatStage = 1;
}

function handleOptionClick(option) {
  addUserMessage(option);
  clearOptions();

  document.getElementById("chat-input-container").style.display = "block";

  switch (option) {
    case "Courses":
      showBotMessagesThenOptions(["We offer Paid & Free Digital Marketing Courses."], ["Paid", "Free"]);
      break;

    case "Talk to Counselor":
      showBotMessagesThenOptions(["You can schedule or initiate a call."], ["Schedule Call", "Instant Call"]);
      break;

    case "Schedule Call":
    case "Instant Call":
      addBotMessage("Please share your Full Name, Mobile Number and Email.");
      break;

    case "Just Exploring":
      addBotMessage("Feel free to look around! Let us know if you need anything.");
      break;

    case "Paid":
      addBotMessage("Our paid courses include mentorship, live projects, and certifications.");
      break;

    case "Free":
      addBotMessage("You can explore our free resources and webinars to get started.");
      break;

    default:
  addBotMessage("Thanks for your interest! ðŸ˜Š");

  setTimeout(() => {
    window.location.href = 'thankyou/index.html';
  }, 5000); 
  break;
  }
}


function sendMessage() {
  const input = document.getElementById("userinput");
  const message = input.value.trim();
  if (!message) return;
  addUserMessage(message);
  input.value = '';
  addBotMessage("Thanks for your message! ðŸ˜Š");
  setTimeout(() => {
    window.location.href = 'thankyou/index.html'; 
  }, 5000); 
  document.getElementById("chat-input-container").style.display = "none";
}

function closeGreeting() {
  document.getElementById("chat-greeting").classList.remove("show");
}

function toggleChat() {
  const widget = document.getElementById("chat-widget");
  const toggle = document.getElementById("chat-toggle");
  const arrow = document.getElementById("chat-down-arrow");
  const greeting = document.getElementById("chat-greeting");
  const isOpen = widget.classList.contains("open");

  if (!isOpen) {
    widget.classList.add("open");
    toggle.style.display = "none";
    arrow.style.display = "flex";
    greeting.classList.remove("show");
    showInitialBotMessages();
  } else {
    widget.classList.remove("open");
    setTimeout(() => {
      toggle.style.display = "flex";
      arrow.style.display = "none";
    }, 400);
  }
}

window.addEventListener("load", function () {
  document.getElementById("userinput").addEventListener("keydown", function (e) {
    if (e.key === "Enter") {
      e.preventDefault();
      sendMessage();
    }
  });

  const greeting = document.getElementById("chat-greeting");
  setTimeout(() => greeting.classList.add("show"), 1000);
  setTimeout(() => greeting.classList.remove("show"), 8000);
});
</script>

</body>
</html>
